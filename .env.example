# ──────────────────────────────────────────────────────────────────────
# Ripple Next — Environment Variables
# Copy this file to .env and fill in values for your environment.
#
# Nuxt convention: NUXT_ prefixed vars auto-map to runtimeConfig keys.
# e.g. NUXT_DATABASE_URL -> runtimeConfig.databaseUrl
# See: apps/web/nuxt.config.ts → runtimeConfig
# ──────────────────────────────────────────────────────────────────────

# ── Database ──────────────────────────────────────────────────────────
# PostgreSQL connection string. Required for DB commands and integration tests.
# Local dev default uses docker-compose Postgres service.
# Used directly by Drizzle CLI commands (db:migrate, db:seed, db:generate).
DATABASE_URL=postgres://ripple:ripple@localhost:5432/ripple

# Nuxt runtime config mapping — Nuxt server reads this at runtime.
# Must be set for tRPC routes and auth to connect to the database.
NUXT_DATABASE_URL=postgres://ripple:ripple@localhost:5432/ripple

# ── Redis ─────────────────────────────────────────────────────────────
# Redis connection string. Required for BullMQ queue provider and caching.
REDIS_URL=redis://localhost:6379
NUXT_REDIS_URL=redis://localhost:6379

# ── Auth / OIDC ──────────────────────────────────────────────────────
# OIDC issuer URL. Leave empty to use MockAuthProvider in development.
# Example for Keycloak: http://localhost:8080/realms/ripple
NUXT_OIDC_ISSUER_URL=
NUXT_OIDC_CLIENT_ID=ripple-web
NUXT_OIDC_CLIENT_SECRET=
NUXT_OIDC_REDIRECT_URI=http://localhost:3000/auth/callback

# Session secret for cookie signing.
NUXT_SESSION_SECRET=dev-session-secret-change-in-production

# ── Storage ──────────────────────────────────────────────────────────
# S3-compatible storage. Local dev uses MinIO via docker-compose.
STORAGE_ENDPOINT=http://localhost:9000
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin
STORAGE_BUCKET=ripple-uploads

# ── Email ────────────────────────────────────────────────────────────
# SMTP config. Local dev uses Mailpit via docker-compose (UI at :8025).
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_FROM=noreply@ripple.local

# ── AWS (production/staging only) ────────────────────────────────────
# These are typically injected by SST Resource linking in deployed environments.
# Not required for local development.
# AWS_REGION=ap-southeast-2
# AWS_ACCOUNT_ID=

# ── Application ──────────────────────────────────────────────────────
# Node environment. Nuxt uses this to determine build mode.
NODE_ENV=development

# Public config (exposed to client).
NUXT_PUBLIC_APP_NAME=Ripple Next
NUXT_PUBLIC_WS_URL=

# ── Feature Flags (optional) ─────────────────────────────────────────
# FEATURE_EVENTS_ENABLED=true
# FEATURE_WEBSOCKET_ENABLED=false
